LowDragMC
光子2
Java集成
基本信息
自 2.0.4 版本起

开发专家

repositories {
maven { url = "https://maven.firstdark.dev/snapshots" } // LDLib2, Photon2
}

dependencies {
// LDLib2
implementation("com.lowdragmc.ldlib2:ldlib2-neoforge-${minecraft_version}:${ldlib2_version}:all") { transitive = false }
compileOnly("org.appliedenergistics.yoga:yoga:1.0.0")

    // Photon2
    implementation("com.lowdragmc.photon:photon-neoforge-${minecraft_version}:${photon2_version}") { transitive = false }
}
最新版本
ldlib2 maven 光子专家

如何加载和使用特效文件？

FX fx = FXHelper.getFX(ResourceLocation.parse("photon:fire"));
// bind it to a block
new BlockEffectExecutor(fx, level, pos).start();
// bind it to an entity
new EntityEffectExecutor(fx, level, entity, AutoRotate.NONE).start();
自行实现IEffectExecutor光子效应的生命周期管理。
有时候，你想用额外的逻辑来控制效果。你可以实现这个逻辑IEffectExecutor，然后做你想做的事情。


IEffectExecutor
示例执行器

public interface IEffectExecutor {

    Level getLevel();

    /**
     * update each FX objects during their duration, per tick. Execute low frequency logic here.
     * <br>
     * e.g., kill particle
     * @param fxObject fx object
     */
    default void updateFXObjectTick(IFXObject fxObject) {
    }

    /**
     * update each FX objects during rendering, per frame. Execute high frequency logic here.
     * <br>
     * e.g., update emitter position, rotation, scale
     * @param fxObject fx object
     * @param partialTicks partialTicks
     */
    default void updateFXObjectFrame(IFXObject fxObject, float partialTicks) {

    }

    default RandomSource getRandomSource() {
        return getLevel().random;
    }
}

查看ExampleExecutor以了解其工作原理。
public class ExampleExecutor extends IEffectExecutor {
    public final FX fx;
    @Getter
    public final Level level;
    // runtime
    @Nullable
    private FXRuntime fxRuntime;

    public ExampleExecutor(FX fx, Level level) {
        this.fx = fx;
        this.level = level;
    }

    public void emit() {
        kill();
        fxRuntime = fx.createRuntime(); // 
        fxRuntime.emmit(this);
    }

    public void kill() {
        if (fxRuntime == null) return;
        fxRuntime.destory(true);
        fxRuntime = null;
    }
}




FX fx = FXHelper.getFX(ResourceLocation.parse("photon:fire"));
var executor = new ExampleExecutor(fx, level);
executor.emit();