用户界面编辑器
自 2.1.5 版本起

警告

此命令只能在世界地图下使用single player。

LDLib2 提供了一个可视化编辑器来支持用户界面创建。使用命令打开用户界面编辑器。


/ldlib2_ui_editor
编辑外观
UI编辑器支持两种通过可视化方式创建UI的方法：

UI XML
UI Template
UI XML
点击File → New → UI XML File创建新的 UI XML 文件。
您也可以点击Open加载现有的 XML 文件。

编辑亮相
编辑亮相
打开后，您可以编辑 XML 文件，并在编辑器中直接查看 UI 的实时预览。有关更多 XML 详细信息，请查看UI XML。

提示

您也可以使用外部集成开发环境（例如 VS Code 或 IntelliJ IDEA）编辑 XML 文件。
保存更改后，预览将自动更新。

UI模板
UI模板类似于UI XML，用于定义 UI 内容
（包括样式和组件树）。

主要区别在于：

可以使用用户界面编辑器以可视方式编辑用户界面模板。
保存的 UI 模板可以作为模板组件在其他UI XML文件或UI 模板中重复使用。
与 UI XML 文件不同，UI 模板由 LDLib2 的资源系统管理。
要创建 UI 模板，请使用资源面板：

编辑亮相
步骤：

选择用户界面资源类别。
选择或创建资源提供者。
右键单击并创建UI 模板，然后双击它进入编辑模式。
编辑您的模板
打开用户界面模板后，您将看到以下编辑器界面：

编辑亮相
样式配置器
编辑内置样式，添加或删除外部样式表，以及检查已应用的样式。

UI 树
显示完整的 UI 层级结构。
您可以通过上下文菜单创建或删除组件，选择多个元素，或拖动来重新排列层级结构。

元素配置器
显示当前所选元素的可配置属性。

预览功能
提供用户界面的实时预览。

使用用户界面编辑器，您可以直观地配置布局、样式和其他设置。如果您理解了“预备知识”
部分 介绍的概念，那么使用该编辑器应该会很直观。 对于具有特殊配置选项的组件，请参阅其各自的文档页面。

加载 UI 模板并进行设置
有两种方法可以加载和使用用户界面模板。

你也可以将其移至你的资产，并通过ResourceLoaction.
如果资源位于 ldlib2 文件夹下，您可以右键单击该资源以获取资源路径并加载它。
编辑亮相

Java
KubeJS

@Override
public ModularUI createUI(Player player) {
var ui = Optional.ofNullable(UIResource.INSTANCE.getResourceInstance()
// resource location based
.getResource(new FilePath(ResourceLoaction.parse("ldlib2:resources/examples/example_layout.ui.nbt"))))

            // file based
            //.getResource(new FilePath(new File(LDLib2.getAssetsDir(), "ldlib2/resources/examples/example_layout.ui.nbt"))) // LDLib2.getAssetsDir() = ".minecraft/ldlib2/assets"

            .map(UITemplate::createUI)
            .orElseGet(UI::empty);

    // find elemetns and do data bindings or logic setup here
    var buttons = ui.select(".button_container > button").toList(); // by selector
    var container = ui.selectRegex("container").findFirst().orElseThrow(); // by id regex

    return ModularUI.of(ui, player);
}

加载事件
已保存的UI 模板仅定义视觉结构和样式，默认情况下不包含运行时逻辑。
大多数情况下，您需要加载模板，然后在代码中手动添加处理程序或绑定。

但是，如果你想在不同的上下文中重用相同的用户界面，每次都重复相同的设置逻辑会变得很繁琐。

为了解决这个问题，LDLib2 提供了一个钩子事件，允许你在 UI 模板调用时注入逻辑createUI()，这样你就可以在创建期间自动配置返回的值UI。


@SubscribeEvent
public static void onUICreated(UITemplate.CreateUI event) {
var template = event.template;
var ui = event.ui;
// do initialization here
}
用户界面模拟
点击编辑器顶部的绿色“播放”按钮进入模拟模式。
这样您就可以与用户界面交互并验证其行为。

编辑亮相